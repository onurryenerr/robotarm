
//hadi bakalim
#include <Servo.h>
 
Servo myservo[2];  // create servo object to control a servo
short int pos[2] =  { 0 };    // variable to store the servo position
short int finishFlag = 1; // flag to save last command execution status
int duration; // variable to store delays between position
long curtime=millis();; // variable to store last command execution time
 
void setup() {
  myservo[0].attach(2);  // attaches the servo on pin 2 to the servo object
  myservo[1].attach(4);
  
  myservo[0].write(pos[0]);
  myservo[1].write(pos[1]);
//  delay(3000);
//  myservo[0].write(pos1);

}
 
void writemotor (short int motor, short int angle) {
  if (finishFlag) {
    duration=1000/(angle-pos[motor]);
    finishFlag = 0;
  }
  
  if( millis()-curtime>duration){
    if (pos[motor]<angle){
      pos[motor]+=1;
      myservo[motor].write(pos[motor]);
    }
    
   else if (pos[motor]>angle){
      pos[motor]-=1;
      myservo[motor].write(pos[motor]);
     }
    curtime=millis();
   }
   
   else
     finishFlag = 1;
}


void loop() {
writemotor(0,100);
writemotor(1,150);
//writemotor(0,positions[j]);
//writemotor(1,positions[j]);
if (finishFlag)
  j++;
}
